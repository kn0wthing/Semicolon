import { Injectable } from "@angular/core";
import { HttpClient, HttpHeaders } from "@angular/common/http";

@Injectable({
  providedIn: "root",
})
export class PatientService {
  private apiURL: string =
    "https://covid-management-api.us-e2.cloudhub.io/api/patient";
  constructor(private http: HttpClient) {}

  public requestPatientReports(patientId: string) {
    return this.http.get(`${this.apiURL}/${patientId}/report/request`);
  }

  public uploadReport(postObj, patientId) {
    const headers = new HttpHeaders();
    headers.append("Content-Type", "multipart/form-data");
    return this.http.post(`${this.apiURL}/${patientId}/report`, postObj, {
      headers: headers,
    });
  }

  public getReportStatus(patientId: string) {
    return this.http.get(`${this.apiURL}/${patientId}/report/status`);
  }

  public approveReportAccess(patientId: string) {
    return this.http.get(`${this.apiURL}/${patientId}/report/request/approve`);
  }

  public rejectReportAccess(patientId: string) {
    return this.http.get(`${this.apiURL}/${patientId}/report/request/reject`);
  }

  public getVaccineDetails(patientId: string) {
    return this.http.get(`${this.apiURL}/${patientId}/vaccine-details`);
  }

  public validateMask(patientId: string, pimage: string) {
    // console.log('Pim', pimage);
    const data = {
      patientId: patientId,
      image: pimage,

      // 'data:image/jpeg;base64,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',
    };
    return this.http.post<any>(
      `${this.apiURL}/${patientId}/validate-mask`,
      data
    );
  }
}
